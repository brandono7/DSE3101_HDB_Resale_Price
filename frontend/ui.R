library(shiny)
library(leaflet)
library(shinyjs)

ui <- fluidPage(
  useShinyjs(),  # Initialize shinyjs
  tags$head(
    tags$script(HTML("
      $(document).on('shiny:inputchanged', function(event) {
        if (event.name === 'tabs') {
          if (['GeospatialAnalysis', 'PredictedPrice'].includes(event.value)) {
            $('#sidebar').show();
          } else {
            $('#sidebar').hide();
          }
        }
      });
    "))
  ),
  navbarPage(
    id = "tabs",  # Important: set an ID for the navbarPage
    title = "Visualizing and Predicting Singapore HDB Resale Prices",
    tabPanel("Home", value = "Home",
             fluidRow(
               column(12,
                      # Content for Home tab
                      textOutput("homeOutput")
               )
             )
    ),
    tabPanel("Geospatial Analysis", value = "GeospatialAnalysis",
             fluidRow(
               column(9,
                      leafletOutput("map", width = "100%", height = "600px"),
                      textOutput("geoSelectionOutput") # Change font-size value as needed
               ),

 # Map output
               column(3,
                      # Sidebar content for geospatial analysis goes here (e.g., inputs, action buttons, etc.)
                      # It will only be visible when the Geospatial Analysis tab is active
                      div(id = "sidebar", class = "well",
                          selectInput("addressM","Postal Code", choices = c(unique(all_address$postal))),
                          actionButton("submitmap", "Submit HDB ðŸ”Ž", class = "btn-primary") ) ), ) ),
   
     
 tabPanel("Predicted Price", value = "PredictedPrice",
             
             fluidRow(
               column(12,
                      # Content for Predicted Price tab
                      textOutput("priceOutput") )),
             div(id = "sidebar", class = "well",
                 selectInput("address","Postal Code", choices = c(unique(all_address$postal))),
                 selectInput("flat_modelM", "Flat Model", choices = c('Model A', 'Improved', 'Premium Apartment', 'Standard',
                                                                      'New Generation', 'Maisonette', 'Apartment', 'Simplified',
                                                                      'Model A2', 'DBSS', 'Terrace', 'Adjoined flat', 'Multi Generation',
                                                                      '2-room', 'Executive Maisonette', 'Type S1S2'), 
                             selected = "Model A"),
                 selectInput("flat_type", "Flat Type", choices = c('2 ROOM', '3 ROOM', '4 ROOM', '5 ROOM', 'EXECUTIVE'), selected = "4 ROOM"),
                 sliderInput("storey","Desired Level",min = 1, max = 50,value = 1,round = TRUE),
                          actionButton("submitprice", "Submit HDB ðŸ”Ž", class = "btn-primary") )),
    verbatimTextOutput("priceOutput") ))

  




